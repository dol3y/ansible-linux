---
- block:
  - name: jenkins | install groovy for testing
    apt:
      name: groovy
      state: present
    become: yes

  - name: jenkins | add signing key
    apt_key:
      url: https://pkg.jenkins.io/debian-stable/jenkins.io.key
      state: present
    become: yes

  - name: jenkins | add repo
    apt_repository:
      filename: jenkins
      repo: "deb https://pkg.jenkins.io/debian-stable binary/"
      update_cache: yes
      state: present
    become: yes

  - name: jenkins | install package
    apt:
      name: jenkins=2.138.3
      state: present
    become: yes

  - name: jenkins | add to docker group
    user:
      name: jenkins
      groups: docker
      append: yes
    become: yes
  tags:
    - jenkins
